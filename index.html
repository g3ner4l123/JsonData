<head>
    <style> body { margin: 0; } </style>
    <script src="//unpkg.com/3d-force-graph"></script>
</head>

<body>
<div id="3d-graph"></div>

<script>
    const api_url = 'https://raw.githubusercontent.com/ob-algdatii-20ss/leistungsnachweis-adventure-time/develop/mockData.json?token=AKOYABHG2QUHA3XBLKQITOK6YKFKA';
    async function getISS() {
        const response = await fetch(api_url);
        const data = await response.json();
        console.log(data.Nodes);
        console.log(data.Edges);
        const nodeArray = new Array();
        const linkSources = new Array();
        const linkDestinations = new Array();
        const colorGroup = new Array();
        const names = new Array();
        for (var k in data.Nodes){
            nodeArray[k] = data.Nodes[k].Index;
            names[k] = nodeArray[k] + " (" + data.Nodes[k].Position.X + ", " + data.Nodes[k].Position.Y + ", " + data.Nodes[k].Position.Z + ")";
            console.log(names[k]);
            if (k == 0){
                colorGroup[k] = 1;
            }
            else if (k = data.Nodes.length-1){
                colorGroup[k] = 2;
            }
            else {
                colorGroup[k] = 3;
            }
        }
        for (var k in data.Edges){
            linkSources[k] = data.Edges[k].Source;
            linkDestinations[k] = data.Edges[k].Destination;
        }
        console.log(nodeArray);
        console.log(linkSources);
        console.log(linkDestinations);
        const gData = {
            nodes: [...nodeArray.keys()].map(i => ({id: nodeArray[i], 'group':colorGroup[i], 'name': names[i]})),
            links: [...linkSources.keys()].map(i =>({"source": linkSources[i],"target": linkDestinations[i]}))

        };
        console.log(gData);
        const Graph = ForceGraph3D()
        (document.getElementById('3d-graph'))
            .graphData(gData)
            .nodeLabel('name')
            .nodeAutoColorBy('group');

    }
    getISS();
</script>
</body>